font.family=NULL
theme_bw(base_size = base_size, base_family = base_family
) %+replace%
theme(axis.text.x =
element_text(size = base_size ,
colour = text.color, hjust = 0.5,
vjust = 1),
axis.text.y = element_text(size = base_size,
colour = text.color,
hjust = 0, vjust = 0.5,
family = font.family),
axis.title.y = element_text(size = base_size,
angle = 180, vjust = 0.01,
hjust = 0.1,
family = font.family),
plot.title = element_text(face = "bold",
family = font.family),
axis.ticks = element_blank(),
legend.background = element_blank(),
legend.key = element_blank(),
panel.background = element_blank(),
panel.border = element_blank(),
strip.background = element_blank(),
plot.background = element_blank(), complete = TRUE,
panel.grid.minor =   element_blank(),
panel.grid.major =  element_line(colour = "grey87",size=0.5))
}
theme_set(theme_bw1())
local <- 'C:/Users/dl0ck/OneDrive/Fall 2021/Prospectus 2022'
###Data
###Higher values == More Racist, More Counternormative, More Conservative, Male lol
###
dat1 <- read.csv(paste0(local,'/data/clean_dat4-22.csv'), header = TRUE, stringsAsFactors = F)
dat1$Treatment <- factor(dat1$Treatment, levels=c('Control','Tweet only','Normative comments','Mixed comments','Counternormative comments'))
dat1$RRV <- (dat1$sumRR/(dat1$sumVALIDRR/6))/24
dat1$RR_pre<-NA
for(i in 1:length(dat1$RRV)){
if(dat1$RRV[i] !='NaN'& is.na(dat1$RRV[i])==F){
if(dat1$RRV[i] <.5){
dat1$RR_pre[i] <- 'Low RR'
}else if( dat1$RRV[i] >=.5){
dat1$RR_pre[i] <- 'High RR'
}
}
}
dat1$RR_pre <-factor(dat1$RR_pre, levels=c('High RR','Low RR'))
f1a<- lm_robust(date~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true',])
f1w<- lm_robust(date~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==0,])
f1b<- lm_robust(date~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==1,])
f2a<- lm_robust(Fear~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true',])
f2w<- lm_robust(Fear~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==0,])
f2b<- lm_robust(Fear~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==1,])
f3a <- lm_robust( Inst~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true',])
f3w <- lm_robust( Inst~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==0,])
f3b <- lm_robust( Inst~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==1,])
f4a <- lm_robust(Rare ~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true',])
f4w <- lm_robust(Rare ~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==0,])
f4b <- lm_robust(Rare ~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==1,])
f5a <- lm_robust(Racism ~  Treatment*RR_pre +pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true',])
f5w <- lm_robust(Racism ~  Treatment*RR_pre +pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==0,])
f5b <- lm_robust(Racism ~  Treatment*RR_pre +pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==1,])
f6a <- lm_robust(dehuman_wb ~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true',])
f6w <- lm_robust(dehuman_wb ~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==0,])
f6b <- lm_robust(dehuman_wb ~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==1,])
f7a <- lm_robust(marrybw~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true',])
f7w <- lm_robust(marrybw~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==0,])
f7b <- lm_robust(marrybw~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==1,])
f8a<- lm_robust(opinionV~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true',])
f8w<- lm_robust(opinionV~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==0,])
f8b<- lm_robust(opinionV~ Treatment*RR_pre+pid+bach+ageCat+male+income+nonwhite,data=dat1[dat1$attn1=='Somewhat true'&dat1$Race==1,])
ests <- bind_rows(tidy(f1a)[2,], tidy(f1w)[2,],tidy(f1b)[2,],
tidy(f2a)[2,], tidy(f2w)[2,],tidy(f2b)[2,],
tidy(f3a)[2,], tidy(f3w)[2,],tidy(f3b)[2,],
tidy(f4a)[2,], tidy(f4w)[2,],tidy(f4b)[2,],
tidy(f5a)[2,], tidy(f5w)[2,],tidy(f5b)[2,],
tidy(f6a)[2,], tidy(f6w)[2,],tidy(f6b)[2,],
tidy(f7a)[2,], tidy(f7w)[2,],tidy(f7b)[2,],
tidy(f8a)[2,], tidy(f8w)[2,],tidy(f8b)[2,],
tidy(f1a)[3,], tidy(f1w)[3,],tidy(f1b)[3,],
tidy(f2a)[3,], tidy(f2w)[3,],tidy(f2b)[3,],
tidy(f3a)[3,], tidy(f3w)[3,],tidy(f3b)[3,],
tidy(f4a)[3,], tidy(f4w)[3,],tidy(f4b)[3,],
tidy(f5a)[3,], tidy(f5w)[3,],tidy(f5b)[3,],
tidy(f6a)[3,], tidy(f6w)[3,],tidy(f6b)[3,],
tidy(f7a)[3,], tidy(f7w)[3,],tidy(f7b)[3,],
tidy(f8a)[3,], tidy(f8w)[3,],tidy(f8b)[3,],
tidy(f1a)[4,], tidy(f1w)[4,],tidy(f1b)[4,],
tidy(f2a)[4,], tidy(f2w)[4,],tidy(f2b)[4,],
tidy(f3a)[4,], tidy(f3w)[4,],tidy(f3b)[4,],
tidy(f4a)[4,], tidy(f4w)[4,],tidy(f4b)[4,],
tidy(f5a)[4,], tidy(f5w)[4,],tidy(f5b)[4,],
tidy(f6a)[4,], tidy(f6w)[4,],tidy(f6b)[4,],
tidy(f7a)[4,], tidy(f7w)[4,],tidy(f7b)[4,],
tidy(f8a)[4,], tidy(f8w)[4,],tidy(f8b)[4,],
tidy(f1a)[5,], tidy(f1w)[5,],tidy(f1b)[5,],
tidy(f2a)[5,], tidy(f2w)[5,],tidy(f2b)[5,],
tidy(f3a)[5,], tidy(f3w)[5,],tidy(f3b)[5,],
tidy(f4a)[5,], tidy(f4w)[5,],tidy(f4b)[5,],
tidy(f5a)[5,], tidy(f5w)[5,],tidy(f5b)[5,],
tidy(f6a)[5,], tidy(f6w)[5,],tidy(f6b)[5,],
tidy(f7a)[5,], tidy(f7w)[5,],tidy(f7b)[5,],
tidy(f8a)[5,], tidy(f8w)[5,],tidy(f8b)[5,]
)
ests$outcome <- rep(c(rep("Date other race", 3),
rep(paste("Fear" , bold("F"),"IRE"), 3),
rep(paste("Institutionalized"  , "F",bold("I"),"RE"), 3),
rep(paste("Rare" , "FI",bold("R"),"E"), 3),
rep(paste("Empathy" , "FIRE",bold("E")), 3),
rep("Dehumanization",3),
rep("Marry other race", 3),
rep("Opinions of announcer", 3),4))
ests$race <- rep(c('All participants','White participants','Black participants'), 32)
ests$Treatment <- rep(c("Tweet only", "Normative comments", "Mixed comments", "Counternormative comments"), each=24)
ests$Treatment=fct_relevel(ests$Treatment,c('Tweet only','Normative comments','Mixed comments','Counternormative comments'))
ests$outcome=fct_relevel(ests$outcome,c('Racism','Rare','Inst','Fear' ,'opinionV','date', 'marrybw','dehuman_wb'))
ests[ests$outcome=='marrybw',2:7]<- ests[ests$outcome=='marrybw',2:7]/100
ests[ests$outcome=='opinionV',2:7]<- ests[ests$outcome=='opinionV',2:7]*10
ests[ests$outcome=='dehuman_wb',2:7]<- ests[ests$outcome=='dehuman_wb',2:7]/100
f1a <- ggplot(data = (ests[ests$outcome == 'Fear' | ests$outcome == 'Inst'| ests$outcome == 'Rare'| ests$outcome == 'Racism',]), aes(y = estimate, x = (outcome), color = Treatment)) +
geom_hline(yintercept = 0, colour = gray(1 / 2), lty = 2) + facet_wrap(~race) +
geom_pointrange(aes(y = estimate,
ymin = conf.low,
ymax = conf.high),
position=position_dodge(width = -.3)) +
#scale_color_manual("Randomized exposure to:", values=c("blue", "red")) +
xlab("") + ylab("") +
scale_x_discrete(labels = c('Empathy','Rare','Institutionalized','Fear'))+
coord_flip()+ theme(legend.position = "bottom")+
scale_color_manual( values= c("sienna4", 'navajowhite3',"paleturquoise4","lightpink3"))
f1a
ggsave(paste0(local,"/images/fireplot.pdf"), width = 12, height = 7, units = "in")
f1b <- ggplot(data = ests[ests$outcome == 'date' |ests$outcome == 'marrybw' |ests$outcome == 'opinionV'| ests$outcome == 'dehuman_wb',]
, aes(y = estimate, x = outcome, color = Treatment)) +
geom_hline(yintercept = 0, colour = gray(1 / 2), lty = 2) + facet_wrap(~race) +
geom_pointrange(aes(y = estimate,
ymin = conf.low,
ymax = conf.high),
position=position_dodge(width = -.3)) +
#scale_color_manual("Randomized exposure to:", values=c("blue", "red")) +
xlab("") + ylab("") +
coord_flip()+ theme(legend.position = "bottom")+
scale_x_discrete(labels = c('Opinion of announcer','Miscegeny date (general)','Miscegeny marry (familial)','Dehumanization scale'))+
scale_color_manual( values= c("sienna4", 'navajowhite3',"paleturquoise4","lightpink3"))
f1b
ggsave(paste0(local,"/images/otherplot.pdf"), width = 12, height = 7, units = "in")
f1c <- ggplot(data = ests[ ests$outcome == 'dehuman_wb',]
, aes(y = estimate, x = outcome, color = Treatment)) +
geom_hline(yintercept = 0, colour = gray(1 / 2), lty = 2) + facet_wrap(~race) +
geom_pointrange(aes(y = estimate,
ymin = conf.low,
ymax = conf.high),
position=position_dodge(width = -.3)) +
#scale_color_manual("Randomized exposure to:", values=c("blue", "red")) +
xlab("") + ylab("") +
scale_color_manual( values= c("sienna4", 'navajowhite3',"paleturquoise4","lightpink3"))+
coord_flip()+ theme(legend.position = "bottom")
f1c
f1d <- ggplot(data = ests[ ests$outcome == 'opinionV',]
, aes(y = estimate, x = outcome, color = Treatment)) +
geom_hline(yintercept = 0, colour = gray(1 / 2), lty = 2) + facet_wrap(~race) +
geom_pointrange(aes(y = estimate,
ymin = conf.low,
ymax = conf.high),
position=position_dodge(width = -.3)) +
#scale_color_manual("Randomized exposure to:", values=c("blue", "red")) +
xlab("") + ylab("") +
coord_flip()+ theme(legend.position = "bottom")+
scale_x_discrete(labels = c("Opinion of announcer"))+
scale_color_manual( values= c("sienna4", 'navajowhite3',"paleturquoise4","lightpink3"))
f1d
screenreg(list(f1a,f1w,f1b,f2a,f2w,f2b,f3a,f3w,f3b,f4a,f4w,f4b,f5a,f5w,f5b),
custom.model.names =  c('Date- all','Date- white','Date- black','Fear- all' ,'Fear- white' ,'Fear- black' ,'Institutional- all','Institutional- white','Institutional- black', 'Rare- all' ,'Rare- white', 'Rare black','Empathy- all','Empathy- white','Empathy- black'))
theme_bw(base_size = base_size, base_family = base_family
) %+replace%
theme(axis.text.x =
element_text(size = base_size ,
colour = text.color, hjust = 0.5,
vjust = 1),
axis.text.y = element_text(size = base_size,
colour = text.color,
hjust = 45, vjust = 0.5,
family = font.family),
axis.title.y = element_text(size = base_size,
angle = 180, vjust = 0.01,
hjust = 0.1,
family = font.family),
plot.title = element_text(face = "bold",
family = font.family),
axis.ticks = element_blank(),
legend.background = element_blank(),
legend.key = element_blank(),
panel.background = element_blank(),
panel.border = element_blank(),
strip.background = element_blank(),
plot.background = element_blank(), complete = TRUE,
panel.grid.minor =   element_blank(),
panel.grid.major =  element_line(colour = "grey87",size=0.5))
theme_bw1 <- function(base_size = text.size, base_family = "") {
label.baseline = TRUE
text.size = 18
text.color = "black"
point.size =2
dodge.size = 0.9
font.family=NULL
theme_bw(base_size = base_size, base_family = base_family
) %+replace%
theme(axis.text.x =
element_text(size = base_size ,
colour = text.color, hjust = 0.5,
vjust = 1),
axis.text.y = element_text(size = base_size,
colour = text.color,
hjust = 45, vjust = 0.5,
family = font.family),
axis.title.y = element_text(size = base_size,
angle = 180, vjust = 0.01,
hjust = 0.1,
family = font.family),
plot.title = element_text(face = "bold",
family = font.family),
axis.ticks = element_blank(),
legend.background = element_blank(),
legend.key = element_blank(),
panel.background = element_blank(),
panel.border = element_blank(),
strip.background = element_blank(),
plot.background = element_blank(), complete = TRUE,
panel.grid.minor =   element_blank(),
panel.grid.major =  element_line(colour = "grey87",size=0.5))
}
theme_set(theme_bw1())
f1a <- ggplot(data = (ests[ests$outcome == 'Fear' | ests$outcome == 'Inst'| ests$outcome == 'Rare'| ests$outcome == 'Racism',]), aes(y = estimate, x = (outcome), color = Treatment)) +
geom_hline(yintercept = 0, colour = gray(1 / 2), lty = 2) + facet_wrap(~race) +
geom_pointrange(aes(y = estimate,
ymin = conf.low,
ymax = conf.high),
position=position_dodge(width = -.3)) +
#scale_color_manual("Randomized exposure to:", values=c("blue", "red")) +
xlab("") + ylab("") +
scale_x_discrete(labels = c('Empathy','Rare','Institutionalized','Fear'))+
coord_flip()+ theme(legend.position = "bottom")+
scale_color_manual( values= c("sienna4", 'navajowhite3',"paleturquoise4","lightpink3"))
f1a
theme_bw(base_size = base_size, base_family = base_family
) %+replace%
theme(axis.text.x =
element_text(size = base_size ,
colour = text.color, hjust = 0.5,
vjust = 1),
axis.text.y = element_text(size = base_size,
colour = text.color,
hjust = .45, vjust = 0.5,
family = font.family),
axis.title.y = element_text(size = base_size,
angle = 180, vjust = 0.01,
hjust = 0.1,
family = font.family),
plot.title = element_text(face = "bold",
family = font.family),
axis.ticks = element_blank(),
legend.background = element_blank(),
legend.key = element_blank(),
panel.background = element_blank(),
panel.border = element_blank(),
strip.background = element_blank(),
plot.background = element_blank(), complete = TRUE,
panel.grid.minor =   element_blank(),
panel.grid.major =  element_line(colour = "grey87",size=0.5))
theme_bw1 <- function(base_size = text.size, base_family = "") {
label.baseline = TRUE
text.size = 18
text.color = "black"
point.size =2
dodge.size = 0.9
font.family=NULL
theme_bw(base_size = base_size, base_family = base_family
) %+replace%
theme(axis.text.x =
element_text(size = base_size ,
colour = text.color, hjust = 0.5,
vjust = 1),
axis.text.y = element_text(size = base_size,
colour = text.color,
hjust = .45, vjust = 0.5,
family = font.family),
axis.title.y = element_text(size = base_size,
angle = 180, vjust = 0.01,
hjust = 0.1,
family = font.family),
plot.title = element_text(face = "bold",
family = font.family),
axis.ticks = element_blank(),
legend.background = element_blank(),
legend.key = element_blank(),
panel.background = element_blank(),
panel.border = element_blank(),
strip.background = element_blank(),
plot.background = element_blank(), complete = TRUE,
panel.grid.minor =   element_blank(),
panel.grid.major =  element_line(colour = "grey87",size=0.5))
}
theme_set(theme_bw1())
f1a <- ggplot(data = (ests[ests$outcome == 'Fear' | ests$outcome == 'Inst'| ests$outcome == 'Rare'| ests$outcome == 'Racism',]), aes(y = estimate, x = (outcome), color = Treatment)) +
geom_hline(yintercept = 0, colour = gray(1 / 2), lty = 2) + facet_wrap(~race) +
geom_pointrange(aes(y = estimate,
ymin = conf.low,
ymax = conf.high),
position=position_dodge(width = -.3)) +
#scale_color_manual("Randomized exposure to:", values=c("blue", "red")) +
xlab("") + ylab("") +
scale_x_discrete(labels = c('Empathy','Rare','Institutionalized','Fear'))+
coord_flip()+ theme(legend.position = "bottom")+
scale_color_manual( values= c("sienna4", 'navajowhite3',"paleturquoise4","lightpink3"))
f1a
theme_bw(base_size = base_size, base_family = base_family
) %+replace%
theme(axis.text.x =
element_text(size = base_size ,
colour = text.color, hjust = 0.5,
vjust = 1),
axis.text.y = element_text(size = base_size,
colour = text.color,
hjust = .45, vjust = 0.95,
family = font.family),
axis.title.y = element_text(size = base_size,
angle = 180, vjust = 0.01,
hjust = 0.1,
family = font.family),
plot.title = element_text(face = "bold",
family = font.family),
axis.ticks = element_blank(),
legend.background = element_blank(),
legend.key = element_blank(),
panel.background = element_blank(),
panel.border = element_blank(),
strip.background = element_blank(),
plot.background = element_blank(), complete = TRUE,
panel.grid.minor =   element_blank(),
panel.grid.major =  element_line(colour = "grey87",size=0.5))
theme_bw1 <- function(base_size = text.size, base_family = "") {
label.baseline = TRUE
text.size = 18
text.color = "black"
point.size =2
dodge.size = 0.9
font.family=NULL
theme_bw(base_size = base_size, base_family = base_family
) %+replace%
theme(axis.text.x =
element_text(size = base_size ,
colour = text.color, hjust = 0.5,
vjust = 1),
axis.text.y = element_text(size = base_size,
colour = text.color,
hjust = .45, vjust = 0.95,
family = font.family),
axis.title.y = element_text(size = base_size,
angle = 180, vjust = 0.01,
hjust = 0.1,
family = font.family),
plot.title = element_text(face = "bold",
family = font.family),
axis.ticks = element_blank(),
legend.background = element_blank(),
legend.key = element_blank(),
panel.background = element_blank(),
panel.border = element_blank(),
strip.background = element_blank(),
plot.background = element_blank(), complete = TRUE,
panel.grid.minor =   element_blank(),
panel.grid.major =  element_line(colour = "grey87",size=0.5))
}
theme_set(theme_bw1())
f1b <- ggplot(data = ests[ests$outcome == 'date' |ests$outcome == 'marrybw' |ests$outcome == 'opinionV'| ests$outcome == 'dehuman_wb',]
, aes(y = estimate, x = outcome, color = Treatment)) +
geom_hline(yintercept = 0, colour = gray(1 / 2), lty = 2) + facet_wrap(~race) +
geom_pointrange(aes(y = estimate,
ymin = conf.low,
ymax = conf.high),
position=position_dodge(width = -.3)) +
#scale_color_manual("Randomized exposure to:", values=c("blue", "red")) +
xlab("") + ylab("") +
coord_flip()+ theme(legend.position = "bottom")+
scale_x_discrete(labels = c('Opinion of announcer','Miscegeny date (general)','Miscegeny marry (familial)','Dehumanization scale'))+
scale_color_manual( values= c("sienna4", 'navajowhite3',"paleturquoise4","lightpink3"))
f1b
ggsave(paste0(local,"/images/otherplot.pdf"), width = 12, height = 7, units = "in")
f1a <- ggplot(data = (ests[ests$outcome == 'Fear' | ests$outcome == 'Inst'| ests$outcome == 'Rare'| ests$outcome == 'Racism',]), aes(y = estimate, x = (outcome), color = Treatment)) +
geom_hline(yintercept = 0, colour = gray(1 / 2), lty = 2) + facet_wrap(~race) +
geom_pointrange(aes(y = estimate,
ymin = conf.low,
ymax = conf.high),
position=position_dodge(width = -.3)) +
#scale_color_manual("Randomized exposure to:", values=c("blue", "red")) +
xlab("") + ylab("") +
scale_x_discrete(labels = c('Empathy','Rare','Institutionalized','Fear'))+
coord_flip()+ theme(legend.position = "bottom")+
scale_color_manual( values= c("sienna4", 'navajowhite3',"paleturquoise4","lightpink3"))
f1a
f1b <- ggplot(data = ests[ests$outcome == 'date' |ests$outcome == 'marrybw' |ests$outcome == 'opinionV'| ests$outcome == 'dehuman_wb',]
, aes(y = estimate, x = outcome, color = Treatment)) +
geom_hline(yintercept = 0, colour = gray(1 / 2), lty = 2) + facet_wrap(~race) +
geom_pointrange(aes(y = estimate,
ymin = conf.low,
ymax = conf.high),
position=position_dodge(width = -.3)) +
#scale_color_manual("Randomized exposure to:", values=c("blue", "red")) +
xlab("") + ylab("") +
coord_flip()+ theme(legend.position = "bottom")+
scale_x_discrete(labels = c('Opinion of announcer','Miscegeny date (general)','Miscegeny marry (familial)','Dehumanization scale'))+
scale_color_manual( values= c("sienna4", 'navajowhite3',"paleturquoise4","lightpink3"))
f1b
ggsave(paste0(local,"/images/otherplot.pdf"), width = 12, height = 9, units = "in")
ggsave(paste0(local,"/images/otherplot.pdf"), width = 12, height = 12, units = "in")
ggsave(paste0(local,"/images/otherplot.pdf"), width = 15, height = 12, units = "in")
f1a <- ggplot(data = (ests[ests$outcome == 'Fear' | ests$outcome == 'Inst'| ests$outcome == 'Rare'| ests$outcome == 'Racism',]), aes(y = estimate, x = (outcome), color = Treatment)) +
geom_hline(yintercept = 0, colour = gray(1 / 2), lty = 2) + facet_wrap(~race) +
geom_pointrange(aes(y = estimate,
ymin = conf.low,
ymax = conf.high),
position=position_dodge(width = -.3)) +
#scale_color_manual("Randomized exposure to:", values=c("blue", "red")) +
xlab("") + ylab("") +
scale_x_discrete(labels = c('Empathy','Rare','Institutionalized','Fear'))+
coord_flip()+ theme(legend.position = "bottom")+
scale_color_manual( values= c("sienna4", 'navajowhite3',"paleturquoise4","lightpink3"))
f1a
ggsave(paste0(local,"/images/fireplot.pdf"), width = 15, height = 12, units = "in")
f1b <- ggplot(data = ests[ests$outcome == 'date' |ests$outcome == 'marrybw' |ests$outcome == 'opinionV'| ests$outcome == 'dehuman_wb',]
, aes(y = estimate, x = outcome, color = Treatment)) +
geom_hline(yintercept = 0, colour = gray(1 / 2), lty = 2) + facet_wrap(~race) +
geom_pointrange(aes(y = estimate,
ymin = conf.low,
ymax = conf.high),
position=position_dodge(width = -.3)) +
#scale_color_manual("Randomized exposure to:", values=c("blue", "red")) +
xlab("") + ylab("") +
coord_flip()+ theme(legend.position = "bottom")+
scale_x_discrete(labels = c('Opinion of announcer','Miscegeny date (general)','Miscegeny marry (familial)','Dehumanization scale'))+
scale_color_manual( values= c("sienna4", 'navajowhite3',"paleturquoise4","lightpink3"))
f1b
ggsave(paste0(local,"/images/otherplot.pdf"), width = 15, height = 12, units = "in")
ggsave(paste0(local,"/images/otherplot.pdf"), width = 9, height = 5, units = "in")
ggsave(paste0(local,"/images/otherplot.pdf"), width = 11, height = 5, units = "in")
ggsave(paste0(local,"/images/otherplot.pdf"), width = 16, height = 13, units = "in")
ests$race
dat1$Race
f1a
f1
f1a
f2a
summary(f1w)
screenreg(f1a,include.ci=F)
screenreg(f2a,include.ci=F)
nrow(dat1)
library(cowplot)
library(descr)
library(readr)
library(magick)
library(dplyr)
library(magrittr)
library(grid)
library(kableExtra)
library(stringr)
library(gridExtra)
library(knitr)
library(ggplot2)
library(gtable)
library(labelled)
library(haven)
library(gmodels)
library(png)
library(tidyverse)
library(cjoint)
library(stargazer)
library(Hmisc)
library(sjPlot)
library(labelled)
library(haven)
library(png)
library(magicfor)
library(magicfor)
library(fastDummies)
library(lme4)
library(coefplot)
library(pBrackets)
library(estimatr)
library(ggtext)
library(texreg)
local <- 'C:/Users/dl0ck/OneDrive/Fall 2021/Prospectus 2022/'
setwd(local)
#small function that exports tables to .tex file}
#only texreg handles lm_robust-it doesnt do regular tables
mod_texreg <- function(output.file, ...) {
output <- capture.output(texreg(...))
cat(paste(output, collapse = "\n"), "\n", file=output.file, append=F)
}
df <- read.csv(file = paste0(local,'Race and Misinfo/tass/8557_WUSTL-Weidenbaum08_20211217.csv'), header = TRUE, stringsAsFactors = FALSE)
dat <- df[,c('P_MISINF1','P_MISINF2','MISINF1_TOTALTIME','MISINF2_TOTALTIME','MISINF1A','MISINF2A','MISINF1B','MISINF2B','EDUC5','AGE4','RACETHNICITY','PartyID7','INCOME4','WEIGHT1','WEIGHT2')]
dat1 <- read.csv(paste0(local,'data/tass_misinfo/8557_WUSTL-Weidenbaum10Main.csv'), header = TRUE, stringsAsFactors = T)
dat1$treatment <- NA
dat1$treatment[dat1$P_MISINF ==1 ] <- "Control"
dat1$treatment[dat1$P_MISINF ==2 ] <- "Black correction"
dat1$treatment[dat1$P_MISINF ==3 ] <- "White correction"
dat1$treatment <- factor(dat1$treatment, levels = c('Control' ,'Black correction','White correction'))
dat1$MISINF_PRE[dat1$MISINF_PRE >5 ] <- NA
dat1$MISINF_POST[dat1$MISINF_POST >5 ] <- NA
dat1$pre <- 5- dat1$MISINF_PRE
dat1$post <- 5- dat1$MISINF_POST
dat1$black <- ifelse(dat1$GROUPS_RACE==2,1,0)
dat1$dif <- dat1$post - dat1$pre
dat1$Treatment <- ifelse(dat1$Treatment =='Control',0,1)
